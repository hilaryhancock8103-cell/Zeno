(function(){var g=document.getElementById("gallery");if(!g)return;var imgs=[].slice.call(g.querySelectorAll("img"));var lb=document.getElementById("lightbox");var lbImg=document.getElementById("lb-img");var close=document.getElementById("lb-close");var prev=document.getElementById("lb-prev");var next=document.getElementById("lb-next");var idx=0;function open(i){idx=i;lbImg.src=imgs[idx].src;lb.classList.add("open");lb.setAttribute("aria-hidden","false");document.body.style.overflow="hidden"}function shut(){lb.classList.remove("open");lb.setAttribute("aria-hidden","true");document.body.style.overflow="auto"}function go(d){var visible=imgs.filter(function(x){return x.style.display!=="none"});var cur=visible.indexOf(imgs[idx]);if(cur<0){visible=imgs}var ni=(cur+d+visible.length)%visible.length;idx=imgs.indexOf(visible[ni]);lbImg.src=imgs[idx].src}imgs.forEach(function(img,i){img.addEventListener("click",function(){open(i)})});close.addEventListener("click",shut);prev.addEventListener("click",function(){go(-1)});next.addEventListener("click",function(){go(1)});lb.addEventListener("click",function(e){if(e.target===lb)shut()});document.addEventListener("keydown",function(e){if(!lb.classList.contains("open"))return;if(e.key==="Escape")shut();if(e.key==="ArrowLeft")go(-1);if(e.key==="ArrowRight")go(1)})})();
